function table(e,t,l={}){let o=make("table",l.bodyAttrib);return o._tabletimeout={},0==l?(o.showHead=!1,l={}):o.showHead=_init(l.showHead,!0),setOptions(o,l,{onCellClick:null,canSelect:!1,selectColor:"silver",invalidSelectColor:"#CC6060",invalidColor:"#FF8070",selectedRow:-1,selectedCol:-1}),o.rowSelect=_init(l.rowSelect,!0),o._rowid=l.rowid||[],o._rowvalue=l.rowvalue||[],o._rowvalid=l.rowvalid||[],o.onclick=e=>{let t=e.srcElement.cellIndex,l=e.srcElement.parentElement.rowIndex;o.select(t,l)},o.doSelect=function(e){if(!o.canSelect)return;let t=e.target,l=t.parentElement.rowIndex,i=t.cellIndex;o.select(i,l)}.bind(o),o.getrowvalid=function(e){return arrayvalue(o._rowvalid,e,!0)},o.setrowvalid=function(e,t){o._rowvalid[e]=t,clearTimeout(o._tabletimeout),o._tabletimeout=setTimeout(()=>{o.colorize()},10)},o.colorize=function(){for(let e in this.rows){let t=this.rows[e],l=o.getrowvalid(e);for(let e=0;e<t.childElementCount;e++)t.rowIndex!==o.selectedRow||!o.rowSelect&&e!=o.selectedCol?t.cells[e].style.backgroundColor=l?null:o.invalidColor:t.cells[e].style.backgroundColor=l?o.selectColor:o.invalidSelectColor}},o.buildTable(e,t,o.showHead),l.headAttrib&&o.tHead&&setAttributes(o.tHead,l.headAttrib),l.bodyAttrib&&setAttributes(o.tBodies[0],l.bodyAttrib),l.tableAttrib&&setAttributes(o,l.tableAttrib),l.head&&(o.head=l.head),l.body&&(o.body=l.body),o.select(l.selectedCol,l.selectedRow),l.onSelect&&(o.onSelect=l.onSelect),o.colorize(),o}HTMLTableElement.prototype.buildTable=function(e,t,l,o,i){let r,n,s,c,d;if(this.innerHTML="",this.showHead=l,l)for(s=createAt(this,"thead"),r=0;r<e;r++)createAt(s,"th",i).innerHTML="&nbsp";for(c=createAt(this,"tbody"),n=0;n<t;n++){let t=createAt(c,"tr");for(r=0;r<e;r++)d=createAt(t,"td",o),d.innerHTML="&nbsp",d.onclick=this.onCellClick}},HTMLTableElement.prototype.put=function(e,t,l,o){this.buildTable(e,t,this.showHead),l&&(this.head=l),o&&(this.body=o)},HTMLTableElement.prototype.cell=function(e,t){return this.rows[t].cells[e]},HTMLTableElement.prototype.colStyle=function(e,t,l=!1){if(Array.isArray(e)){let t=Math.min(e.length,this.colCnt);for(let o=0;o<t;o++){let t=e[o];for(let e=0;e<this.rows.length;e++)this.rows[e].childNodes[o].style.cssText=t;l&&(this.head[o].style.cssText=t)}}else{for(let l=0;l<this.rows.length;l++)this.rows[l].childNodes[e].style.cssText=t;l&&this.tHead&&(this.tHead.childNodes[e].style.cssText+=t)}},HTMLTableElement.prototype.select=function(e,t){this.selectedRow=t||0,this.selectedCol=e||0,this.colorize(),this.onSelect&&this.onSelect(e,t,this)},HTMLTableElement.prototype.selectRow=function(e){this.select(0,e)},Object.defineProperty(HTMLTableElement.prototype,"rowCount",{get:function(){return this.rows.length}}),Object.defineProperty(HTMLTableElement.prototype,"colCount",{get:function(){return 0==this.rows.length?0:this.rows[0].childElementCount}}),Object.defineProperty(HTMLTableElement.prototype,"head",{get:function(){let e=[];for(let t in this.tHead.childNodes){let l=this.tHead.childNodes[t];e.push(l.innerHTML)}return e},set:function(e){if(this.showHead)for(let t in e)t<this.tHead.childElementCount&&(this.tHead.childNodes[t].innerHTML=e[t])}}),Object.defineProperty(HTMLTableElement.prototype,"body",{get:function(){let e,t=[];for(let l=0;l<this.rowCount;l++){e=[];let o=Array.from(this.rows[l].childNodes);for(let t in o){let l=o[t];e.push(l.innerHTML)}t.push(e)}return t},set:function(e){if(1==this.colCount)for(let t=0;t<e.length;t++)t<this.rowCount&&(this.cell(0,t).innerHTML=e[t]);else for(let t=0;t<Math.min(e.length,this.rowCount);t++)for(let l=0;l<Math.min(e[t].length,this.colCount);l++)this.cell(l,t).innerHTML=e[t][l]}}),Object.defineProperty(HTMLTableElement.prototype,"rowid",{get:function(){return this._rowid},set:function(e){this._rowid=e}}),Object.defineProperty(HTMLTableElement.prototype,"selectedRowid",{get:function(){return this.selectedRow<0?"":this._rowid[this.selectedRow]}}),Object.defineProperty(HTMLTableElement.prototype,"rowvalue",{get:function(){return this._rowvalue},set:function(e){this._rowvalue=e}}),Object.defineProperty(HTMLTableElement.prototype,"selectedRowvalue",{get:function(){return this._rowvalue[this.selectedRow]}}),Object.defineProperty(HTMLTableElement.prototype,"selectedCellvalue",{get:function(){if(this.selectedCol<0||this.selectedRow<0)return"";return this.cell(this.selectedCol,this.selectedRow).textContent}}),Object.defineProperty(HTMLTableElement.prototype,"selectedCell",{get:function(){return this.cell(this.selectedCol,this.selectedRow)}});